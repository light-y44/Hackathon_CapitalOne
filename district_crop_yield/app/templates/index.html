<!DOCTYPE html>
<html>
<head>
    <title>AI Farmer Adivsor</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <!-- Header -->
    <header>
        <h1>üë®‚Äçüåæ Krishi Mitr</h1>
        <h2 class="first-subheader">üòä Aapka Krishi Salahkaar!</h2>
    </header>
   
    <!-- Repayment Notifications -->
    <div class="container">
        <!-- Left column: Chat + Notifications -->
        <div class="left-panel">
            <div class="section notification-box">
                <h2>üí∞ Repayment Updates</h2>
                {% for n in notifications %}
                    {% if n.revenue or n.expenses or n.net_cash_flow or n.loan_repayment %}
                        <a href="{{ url_for('notification_page') }}"
                        class="notification-link"
                        data-revenue="{{ n.revenue }}"
                        data-expenses="{{ n.expenses }}"
                        data-net_cash_flow="{{ n.net_cash_flow }}"
                        data-loan_repayment="{{ n.loan_repayment }}">
                            <div class="notification">
                                <b>Revenue:</b> {{ n.revenue }} | 
                                <b>Expenses:</b> {{ n.expenses }} | 
                                <b>Net Cash Flow:</b> {{ n.net_cash_flow }} |
                                <b>Loan Repayment:</b> {{ n.loan_repayment }}
                            </div>
                        </a>
                    {% endif %}
                {% endfor %}
            </div>
                <!-- General Queries -->
            <div class="section chat-box">
                <h2>ü§ñ General Queries</h2>

                <!-- Messages area -->
                <div id="messages" class="messages">
                    <!-- Example bubbles -->
                    <div class="message bot">Hello! How can I help you today?</div>
                    <!-- Thinking Loader -->
                </div>
                <div id="thinkingLoader" class="loader" style="display: none;">
                    Thinking...can take up to several minutes
                    <span class="dot"></span><span class="dot"></span><span class="dot"></span>
                </div>

                <!-- Text Input -->
                <form id="queryForm">
                    <div class="query-box">
                        <input type="text" name="query" placeholder="Type your question..." style="flex:1; padding:8px;">
                        <button type="submit">Send</button>
                    </div>
                </form>

                <br>

                <!-- Voice Recording -->
                <div id="recordingLoader" class="loader" style="display: none;">
                    Listening
                    <span class="dot"></span><span class="dot"></span><span class="dot"></span>
                </div>
                <button id="startBtn">üéôÔ∏è Start Recording</button>
                <button id="stopBtn" disabled>‚èπ Stop Recording</button>
                
            </div>
        </div>
        <div class="right-panel">
            <div class="section info-box">
                 <!-- Information Input Box -->
                <h2>üìã Farmer Loan Details</h2>
                <form id="infoForm" class="info-form">
                    <div class="field-group">
                        <label for="district">District:</label>
                        <select id="district" name="district" required>
                            <option value="">Select district</option>
                            <option value="ashoknagar">Ashoknagar</option>
                            <option value="bhopal">Bhopal</option>
                            <option value="indore">Indore</option>
                        </select>
                    </div>

                    <div class="field-group">
                        <label for="crop">Crop:</label>
                        <select id="crop" name="crop" required>
                            <option value="">Select crop</option>
                            <option value="wheat">Wheat</option>
                            <option value="rice">Rice</option>
                            <option value="maize">Maize</option>
                        </select>
                    </div>

                    <div class="field-group">
                        <label for="loan">Loan Amount (‚Çπ):</label>
                        <input type="number" id="loan" name="loan" placeholder="Enter loan amount" required min="0" step="1000">
                    </div>

                    <div class="field-group">
                        <label for="interest">Interest Rate (%):</label>
                        <input type="number" id="interest" name="interest" placeholder="Enter interest rate" required min="0" step="0.01">
                    </div>

                    <div class="field-group">
                        <label for="area">Area of Farm (acres):</label>
                        <input type="number" id="area" name="area" placeholder="Enter farm area" required min="0" step="0.01">
                    </div>
                    <div class="field-group">
                        <label for="non-farm-inc">Non-Farm Income (‚Çπ):</label>
                        <input type="number" id="non-farm-inc" name="non-farm-inc" placeholder="Enter income" required min="0" step="0.01">
                    </div>
                    <div class="field-group">
                        <label for="ins-prem">Insurance Premium (‚Çπ):</label>
                        <input type="number" id="ins-prem" name="ins-prem" placeholder="Enter insurance premium" required min="0" step="0.01">
                    </div>
                    <div class="field-group">
                        <label for="tenure">Tenure (months):</label>
                        <input type="number" id="tenure" name="tenure" placeholder="Enter tenure" required min="0" step="1">
                    </div>
                    <div class="field-group">
                        <label for="input-cost">Input Cost (‚Çπ):</label>
                        <input type="number" id="input-cost" name="input-cost" placeholder="Enter input cost" required min="0" step="1">
                    </div>
                    <div class="field-group">
                        <label for="monthly-exp">Monthly Expenses (‚Çπ):</label>
                        <input type="number" id="monthly-exp" name="monthly-exp" placeholder="Enter monthly expense" required min="0" step="1">
                    </div>
                    <div class="field-group">
                        <label for="year">Year:</label>
                        <select id="year" name="year" required>
                            <option value="">Select year</option>
                            <option value="2023">2023</option>
                            <option value="2024">2024</option>
                            <option value="2025">2025</option>
                        </select>
                    </div>

                    <div class="field-group">
                        <label for="month">Month:</label>
                        <select id="month" name="month" required>
                            <option value="">Select month</option>
                            <option value="February">February</option>
                            <option value="November">November</option>
                        </select>
                    </div>
                    <button type="submit">Submit</button>
                </form>
            </div>
        </div>
    </div>
    
    <!-- Link external JS -->
    <script src="{{ url_for('static', filename='js/recording.js') }}"></script>
</body>
</html>
