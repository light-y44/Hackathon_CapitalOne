<!DOCTYPE html>
<html>
<head>
    <title>AI Farmer Adivsor</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <!-- Header -->
    <header>
        <h1>ğŸ‘¨â€ğŸŒ¾ Krishi Mitr</h1>
        <h2 class="first-subheader">ğŸ˜Š Aapka Krishi Salahkaar!</h2>
    </header>
   
    <!-- Repayment Notifications -->
    <div class="container">
        <div class="left-panel">
            <!-- Summary Section -->
            <div class="section notification-section">
                <h2>ğŸ’° Summary</h2>
                <div id="notificationList" class="notification-box summary-box">
                    
                    <!-- Baseline Values -->
                    <h3>ğŸ“Š Baseline Financials</h3>
                    {% if baseline %}
                        {% for key, value in baseline.items() %}
                            <div class="summary-item"><strong>{{ key.replace("_", " ").title() }}:</strong> {{ value }}</div>
                        {% endfor %}
                    {% else %}
                        <div class="summary-item">No baseline data available.</div>
                    {% endif %}
                </div>
            </div>

            <!-- Chat -->
            <div class="section chat-box">
                <h2>ğŸ¤– General Queries</h2>
                <div id="messages" class="messages">
                    <div class="message bot">Hello! How can I help you today?</div>
                </div>

                <!-- Loaders -->
                <div class="loader-row">
                    <div id="thinkingLoader" class="loader thinking-loader" style="display: none;">
                        ğŸ¤” Thinking...
                        <span class="dot"></span><span class="dot"></span><span class="dot"></span>
                    </div>

                    <div id="recordingLoader" class="loader recording-loader" style="display: none;">
                        ğŸ™ï¸ Listening
                        <span class="dot"></span><span class="dot"></span><span class="dot"></span>
                    </div>
                </div>

                <!-- Chat Footer -->
                <div class="chat-footer">
                    <form id="queryForm" class="query-form" style="flex:1; min-width:0;">
                        <div class="query-box" style="width:100%;">
                            <input type="text" name="query" placeholder="Type your question..." autocomplete="off" style="flex:1; padding:8px;">
                            <button type="submit">Send</button>
                        </div>
                    </form>
                    <div class="button-row">
                        <button id="startBtn" type="button">ğŸ™ï¸ Start</button>
                        <button id="stopBtn" type="button" disabled>â¹ Stop</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Right Panel -->
        <div class="right-panel">
            <div class="section info-box">
                <h2>ğŸ“‹ Recommendations</h2>
                <div id="diagramContainer">
                    <!-- Recommendations -->
                    {% if recommendations %}
                        {% for rec in recommendations %}
                            <div class="recommendation">
                                <strong>Option:</strong> {{ rec.option }} <br>
                                <strong>Surplus Score:</strong> {{ rec.score_surplus }} <br>
                                <strong>Details:</strong>
                                <ul>
                                    {% for key, value in rec.details.items() %}
                                        <li>{{ key }}: {{ value }}</li>
                                    {% endfor %}
                                </ul>
                            </div>
                        {% endfor %}
                    {% else %}
                        <p>No recommendations available.</p>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>

    <!-- JS -->
    <script src="{{ url_for('static', filename='js/recording.js') }}"></script>
</body>
</html>
